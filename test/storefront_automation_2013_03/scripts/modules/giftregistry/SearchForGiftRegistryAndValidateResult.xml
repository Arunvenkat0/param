<?xml version="1.0" encoding="UTF-8"?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Searches for a gift registry and validates the resulting page.</description>
  <command name="type" target="id=dwfrm_productlists_search_registrantLastName" value="${UserLastName}"/>
  <command name="type" target="id=dwfrm_productlists_search_registrantFirstName" value="${UserFirstName}"/>
  <command name="select" target="id=dwfrm_productlists_search_eventType" value="value=${EventType}"/>
  <action name="AndValidateResult"/>
  <command name="clickAndWait" target="name=dwfrm_productlists_search_search value=Find"/>
  <command name="assertText" target="css=#primary h2" value="Search Results"/>
  <command name="assertXpathCount" target="id('primary')/table[@class='registry-results-table item-list']/tbody/tr" value="2">
    <comment>number of gift registries plus header row</comment>
  </command>
  <command name="assertText" target="css=.registry-results-table tr:nth-child(2) td:nth-child(1)" value="${UserLastName}"/>
  <command name="assertText" target="css=.registry-results-table tr:nth-child(2) td:nth-child(2)" value="${UserFirstName}"/>
  <command name="assertText" target="css=.registry-results-table tr:nth-child(2) .event-type" value="${EventType}"/>
  <command name="assertText" target="css=.registry-results-table tr:nth-child(2) .event-date" value="${EventDate}"/>
  <command name="assertText" target="css=.registry-results-table tr:nth-child(2) .event-location" value="${EventCity}, ${EventState}"/>
</scriptmodule>