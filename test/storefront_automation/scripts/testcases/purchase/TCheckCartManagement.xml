<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <tags>cart</tags>
  <description>Adds two products to the cart and modifies the quantities:
product1: quantitiy = 1, no discount
product2: quantitiy = 2, no discount

- checks Minicart
- checks Quickinfo in header (number of items, total price)
- checks cart

- modifies the cart (Read, Update, Delete)</description>
  <module name="modules.staticelements.Homepage"/>
  <action name="SearchFirstProductAndCheckResult"/>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${FirstProductID}"/>
  </module>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <action name="AddFirstProductToCart"/>
  <module name="modules.cart.AddProductToCart">
    <parameter name="Quantity" value="${FirstProductQuantity}"/>
    <parameter name="ProductName" value="${FirstProductName}"/>
    <parameter name="ProductPrice" value="${FirstProductPrice}"/>
    <parameter name="Position" value="1"/>
  </module>
  <action name="SearchSecondProductAndCheckResult"/>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${SecondProductID}"/>
  </module>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <action name="AddSecondProductToCart"/>
  <module name="modules.cart.AddProductToCart">
    <parameter name="Quantity" value="${SecondProductQuantityInitital}"/>
    <parameter name="ProductName" value="${SecondProductName}"/>
    <parameter name="ProductPrice" value="${SecondProductTotalPriceInitial}"/>
    <parameter name="Position" value="2"/>
  </module>
  <module name="modules.cart.GotoCartViaMiniCart"/>
  <action name="Return2Home"/>
  <module name="modules.staticelements.Return2Home"/>
  <action name="GoToCart"/>
  <module name="modules.cart.GotoCart"/>
  <module name="modules.cart.ValidateCartContentForProduct">
    <parameter name="Name" value="${FirstProductName}"/>
    <parameter name="SinglePrice" value="${FirstProductPrice}"/>
    <parameter name="TotalPriceProduct" value="${FirstProductTotalPrice}"/>
    <parameter name="Quantity" value="${FirstProductQuantity}"/>
    <parameter name="TableRow" value="1"/>
  </module>
  <module name="modules.cart.ValidateCartContentForProduct">
    <parameter name="Name" value="${SecondProductName}"/>
    <parameter name="SinglePrice" value="${SecondProductPrice}"/>
    <parameter name="TotalPriceProduct" value="${SecondProductTotalPriceInitial}"/>
    <parameter name="Quantity" value="${SecondProductQuantityInitital}"/>
    <parameter name="TableRow" value="2"/>
  </module>
  <module name="modules.cart.ValidateNumberFormatsInCart"/>
  <action name="UpdateProductDetails"/>
  <module name="modules.cart.UpdateProductDetailsInCartQuickView">
    <parameter name="ColorStart" value="${SecondProductFirstColor}"/>
    <parameter name="ColorEnd" value="${SecondProductSecondColor}"/>
    <parameter name="QuantityStart" value="${SecondProductQuantityInitital}"/>
    <parameter name="QuantityEnd" value="${SecondProductQuantityVariation1}"/>
    <parameter name="TableRow" value="2"/>
  </module>
  <module name="modules.cart.ValidateCartContentForProduct">
    <parameter name="Name" value="${FirstProductName}"/>
    <parameter name="SinglePrice" value="${FirstProductPrice}"/>
    <parameter name="TotalPriceProduct" value="${FirstProductTotalPrice}"/>
    <parameter name="Quantity" value="${FirstProductQuantity}"/>
    <parameter name="TableRow" value="1"/>
  </module>
  <module name="modules.cart.ValidateCartContentForProduct">
    <parameter name="Name" value="${SecondProductName}"/>
    <parameter name="SinglePrice" value="${SecondProductPrice}"/>
    <parameter name="TotalPriceProduct" value="${SecondProductTotalPriceVariation1}"/>
    <parameter name="Quantity" value="${SecondProductQuantityVariation1}"/>
    <parameter name="TableRow" value="2"/>
  </module>
  <module name="modules.cart.ValidateNumberFormatsInCart"/>
  <action name="UpdateQuantity"/>
  <module name="modules.cart.UpdateProductQuantityInCart">
    <parameter name="TableRow" value="2"/>
    <parameter name="Quantity" value="${SecondProductQuantityVariation2}"/>
  </module>
  <module name="modules.cart.ValidateCartContentForProduct">
    <parameter name="Name" value="${FirstProductName}"/>
    <parameter name="SinglePrice" value="${FirstProductPrice}"/>
    <parameter name="TotalPriceProduct" value="${FirstProductTotalPrice}"/>
    <parameter name="Quantity" value="${FirstProductQuantity}"/>
    <parameter name="TableRow" value="1"/>
  </module>
  <module name="modules.cart.ValidateCartContentForProduct">
    <parameter name="Name" value="${SecondProductName}"/>
    <parameter name="SinglePrice" value="${SecondProductPrice}"/>
    <parameter name="TotalPriceProduct" value="${SecondProductTotalPriceVariation2}"/>
    <parameter name="Quantity" value="${SecondProductQuantityVariation2}"/>
    <parameter name="TableRow" value="2"/>
  </module>
  <module name="modules.cart.ValidateNumberFormatsInCart"/>
  <action name="DeleteFirstProduct"/>
  <module name="modules.cart.RemoveProductFromCart">
    <parameter name="TableRow" value="1"/>
  </module>
  <module name="modules.cart.ValidateCartContentForProduct">
    <parameter name="Name" value="${SecondProductName}"/>
    <parameter name="SinglePrice" value="${SecondProductPrice}"/>
    <parameter name="TotalPriceProduct" value="${SecondProductTotalPriceVariation2}"/>
    <parameter name="Quantity" value="${SecondProductQuantityVariation2}"/>
    <parameter name="TableRow" value="1"/>
  </module>
  <module name="modules.cart.ValidateNumberFormatsInCart"/>
  <action name="DeleteSecondProduct"/>
  <module name="modules.cart.RemoveProductFromCart">
    <parameter name="TableRow" value="1"/>
  </module>
  <command name="assertText" target="css=#primary h1" value="Your Shopping Cart"/>
  <command name="assertText" target="css=.cart-empty" value="Your Shopping Cart is Empty">
    <comment>Validate message for empty cart.</comment>
  </command>
  <command name="assertElementPresent" target="css=.mini-cart-empty">
    <comment>Validate the empty mini cart.</comment>
  </command>
  <action name="Return2Home"/>
  <module name="modules.staticelements.Return2Home"/>
</testcase>
