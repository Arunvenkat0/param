<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" junit-test="true" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <tags>C84728</tags>
  <description>Test Case ID:(C84728) Smoke Test » Purchasing Gift Certificates » Purchase a Gift Certificate</description>
  <module name="modules.staticelements.Homepage"/>
  <action name="GoToGiftCertificates"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="link=regexpi:Gift Certificates"/>
  </module>
  <action name="CheckCertificateForm"/>
  <module name="modules.giftcertificate.ValidateFormForGiftCertificates">
    <comment>The Gift Certificates form needs to be checked for functionality</comment>
    <parameter name="Donor" value="${Donor}"/>
    <parameter name="FriendName" value="${FriendsName}"/>
    <parameter name="Email" value="${FriendsEmail}"/>
    <parameter name="Message" value="${Message}"/>
    <parameter name="Amount" value="${Amount}"/>
  </module>
  <action name="FillCertificate_Form"/>
  <module name="modules.giftcertificate.FillGiftCertificatesFormAndAddToCart">
    <parameter name="Donor" value="${Donor}"/>
    <parameter name="FriendsName" value="${FriendsName}"/>
    <parameter name="Email" value="${FriendsEmail}"/>
    <parameter name="Message" value="${Message}"/>
    <parameter name="Amount" value="${Amount}"/>
  </module>
  <module name="modules.cart.GotoCart"/>
  <module name="modules.giftcertificate.ValidateCartForGiftCertificates">
    <parameter name="Donor" value="${Donor}"/>
    <parameter name="FriendsName" value="${FriendsName}"/>
    <parameter name="FriendsEmail" value="${FriendsEmail}"/>
    <parameter name="Amount" value="${Amount}"/>
  </module>
  <action name="CheckoutAsGuest"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="name=dwfrm_cart_unregistered"/>
  </module>
  <action name="EnterBillingAndPaymentData"/>
  <module name="modules.giftcertificate.ValidateShippingDataInSideBarGiftCertificates">
    <parameter name="FriendsName" value="${FriendsName}"/>
  </module>
  <module name="modules.checkout.billing.ValidateRequiredAddressFieldsForBilling"/>
  <module name="modules.checkout.billing.EnterBillingAddress">
    <parameter name="FirstName" value="${FirstName}"/>
    <parameter name="LastName" value="${LastName}"/>
    <parameter name="Address1" value="${Address1}"/>
    <parameter name="Address2" value="${Address2}"/>
    <parameter name="Country" value="${Country}"/>
    <parameter name="State" value="${State}"/>
    <parameter name="City" value="${City}"/>
    <parameter name="ZipCode" value="${ZipCode}"/>
    <parameter name="Phone" value="${Phone}"/>
    <parameter name="Email" value="${DonorsEmail}"/>
  </module>
  <module name="modules.checkout.billing.ValidateRequiredPaymentFields"/>
  <module name="modules.checkout.billing.SelectCreditCardAndEnterData">
    <parameter name="CardName" value="${CreditCardName}"/>
    <parameter name="Type" value="${CreditCardType}"/>
    <parameter name="Number" value="${CreditCardNumber}"/>
    <parameter name="ExpireMonth" value="${CreditCardExpiryMonth}"/>
    <parameter name="ExpireYear" value="${CreditCardExpiryYear}"/>
    <parameter name="SecurityCode" value="${CreditCardSecurityCode}"/>
  </module>
  <action name="PlaceOrder"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="css=.button-fancy-large"/>
  </module>
  <module name="modules.giftcertificate.PlaceOrderForGiftCertificates">
    <parameter name="Donor" value="${Donor}"/>
    <parameter name="FriendsName" value="${FriendsName}"/>
    <parameter name="Amount" value="${Amount}"/>
  </module>
  <module name="modules.giftcertificate.ValidateShippingDataInSideBarGiftCertificates">
    <parameter name="FriendsName" value="${FriendsName}"/>
  </module>
  <module name="modules.checkout.billing.ValidateBillingAddressInSidebar">
    <parameter name="Name" value="${FirstName} ${LastName}"/>
    <parameter name="Address" value="${Address1}"/>
    <parameter name="City" value="${City}"/>
    <parameter name="State_Short" value="${StateShort}"/>
    <parameter name="ZipCode" value="${ZipCode}"/>
    <parameter name="Country" value="${Country}"/>
  </module>
  <module name="modules.checkout.billing.ValidatePaymentCreditCardInSidebar">
    <parameter name="Name" value="${CreditCardName}"/>
    <parameter name="Type" value="${CreditCardType}"/>
    <parameter name="NumberLast4" value="${CreditCardNumberLast4Digits}"/>
    <parameter name="ExpireMonthShort" value="${CreditCardExpiryMonthNumber}"/>
    <parameter name="ExpireYear" value="${CreditCardExpiryYear}"/>
  </module>
  <action name="Guest_Receipt"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="name=submit"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=#primary h1"/>
    <parameter name="textPattern" value="Thank you for your order."/>
  </module>
  <command name="assertText" target="css=.order-date .label" value="Order Placed*"/>
  <module name="modules.checkout.summary.ValidateBillingAddressSummaryPage">
    <parameter name="Name" value="${FirstName} ${LastName}"/>
    <parameter name="Address" value="${Address1}"/>
    <parameter name="City" value="${City}"/>
    <parameter name="StateShort" value="${StateShort}"/>
    <parameter name="ZipCode" value="${ZipCode}"/>
    <parameter name="Country" value="${Country}"/>
  </module>
  <module name="modules.checkout.summary.ValidatePaymentCreditCardSummaryPage">
    <parameter name="Type" value="${CreditCardType}"/>
    <parameter name="Last4" value="${CreditCardNumberLast4Digits}"/>
    <parameter name="ExpireMonthNumber" value="${CreditCardExpiryMonthNumber}"/>
    <parameter name="Expire_Year" value="${CreditCardExpiryYear}"/>
  </module>
  <module name="modules.giftcertificate.ValidateTotalPricesOnSummaryPage">
    <parameter name="Amount" value="${Amount}.00"/>
  </module>
  <module name="modules.giftcertificate.ValidateGiftCertificateDataOnSummaryPage">
    <parameter name="Donor" value="${Donor}"/>
    <parameter name="FriendsName" value="${FriendsName}"/>
    <parameter name="Message" value="${Message}"/>
    <parameter name="Amount" value="\$\s*${Amount}.00"/>
  </module>
  <module name="modules.giftcertificate.ValidateShippingDataForGiftCertificatesOnSummaryPage">
    <parameter name="FriendsName" value="${FriendsName}"/>
  </module>
  <action name="GoToHomepage"/>
  <module name="modules.staticelements.Return2Home"/>
</testcase>
