<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" junit-test="true">
  <tags>C84767</tags>
  <description>Test Case ID:(C84767) Smoke Test » Quickview » QuickView: Add to Cart</description>
  <module name="modules.staticelements.Homepage"/>
  <action name="OpenMainCategoryPage"/>
  <module name="modules.catalog.OpenMainCategoryPage">
    <comment>Navigate to Mens --&gt; Footwear catalog page</comment>
    <parameter name="MainCategoryNumber" value="${MainCategoryNumber}"/>
    <parameter name="MainCategoryName" value="${MainCategoryName}"/>
  </module>
  <action name="OpenSubCategoryPage"/>
  <module name="modules.catalog.OpenSubCategoryPage">
    <parameter name="SubCategoryName" value="${SubCategoryName}"/>
  </module>
  <module name="library.function.FSelect">
    <parameter name="element" value="css=#grid-sort-header"/>
    <parameter name="selection" value="Price Low To High"/>
  </module>
  <module name="library.function.FWaitForElement">
    <parameter name="element" value="//option[@selected='selected'][text(),contains('Price Low To High')]"/>
  </module>
  <command name="pause" value="2000"/>
  <command name="storeText" target="css=.grid-tile:first-child .name-link" value="ProductName"/>
  <command name="storeText" target="css=.grid-tile:first-child .product-sales-price" value="ProductPrice"/>
  <action name="OpenQuickview"/>
  <module name="modules.catalog.OpenQuickView"/>
  <module name="modules.catalog.ValidateProductInQuickView"/>
  <action name="SelectSize"/>
  <module name="modules.catalog.CheckQuickviewAndAddToCartButton"/>
  <command name="storeText" target="css=#product-content .price-sales" value="ProductPrice"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="id=add-to-cart"/>
  </module>
  <command name="waitForNotElementPresent" target="css=.quickview"/>
  <action name="CheckMiniCart">
    <comment>Checks the correct behaviour of the mini cart window and the content of the added product</comment>
  </action>
  <module name="modules.minicart.CheckAutomaticAppearanceOfMiniCart"/>
  <module name="modules.minicart.CheckContentOfMiniCart">
    <parameter name="Name" value="${ProductName}"/>
    <parameter name="Quantity" value="1"/>
    <parameter name="PriceProduct" value="${ProductPrice}"/>
    <parameter name="Position" value="1"/>
  </module>
  <command name="storeText" target="css=.grid-tile:last-child .name-link" value="ProductName"/>
  <command name="storeText" target="css=.grid-tile:last-child .product-sales-price" value="ProductPrice"/>
  <action name="OpenQuickview"/>
  <module name="modules.catalog.OpenQuickView"/>
  <module name="modules.catalog.ValidateProductInQuickView"/>
  <module name="modules.catalog.CheckQuickviewAfterAddedToCart"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="id=add-to-cart"/>
  </module>
  <command name="waitForNotElementPresent" target="css=.quickview"/>
  <action name="CheckMiniCart">
    <comment>Checks the correct behaviour of the mini cart window and the content of the added product</comment>
  </action>
  <module name="modules.minicart.CheckAutomaticAppearanceOfMiniCart"/>
  <module name="modules.minicart.CheckContentOfMiniCart">
    <parameter name="Name" value="${ProductName}"/>
    <parameter name="Quantity" value="1"/>
    <parameter name="PriceProduct" value="${ProductPrice}"/>
    <parameter name="Position" value="1"/>
  </module>
  <action name="BackToHome"/>
  <module name="modules.staticelements.Return2Home"/>
</testcase>