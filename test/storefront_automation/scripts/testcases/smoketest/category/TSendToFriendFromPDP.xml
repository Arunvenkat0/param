<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" junit-test="true" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <tags>C84770 C84745 C84746</tags>
  <description>Test Case ID: (C84770,C84745,C84746) (C84745)  Smoke Test » Send to a Friend » Send to a Friend Overlay (C84746) Smoke Test » Send to a Friend » Send to a Friend Review</description>
  <module name="modules.staticelements.Homepage"/>
  <action name="OpenMainCategoryPage"/>
  <module name="modules.catalog.OpenMainCategoryPage">
    <comment>Navigate to Mens --> Footwear catalog page</comment>
    <parameter name="MainCategoryNumber" value="${MainCategoryNumber}"/>
    <parameter name="MainCategoryName" value="${MainCategoryName}"/>
  </module>
  <action name="OpenSubCategoryPage"/>
  <module name="modules.catalog.OpenSubCategoryPage">
    <parameter name="SubCategoryName" value="${SubCategoryName}"/>
  </module>
  <action name="GetDataFromFirstProductAndOpenIt"/>
  <module name="library.function.FStoreText">
    <parameter name="textElement" value="//li[div[contains(@class,'product-tile')]//div[contains(@class,'product-pricing')]/span[(contains(@class,'product-sales-price') and (not (contains(text(),'-'))))]]//a[contains(@class,'name-link')]"/>
    <parameter name="textStoreVariableName" value="ProductName"/>
  </module>
  <command name="storeText" disabled="true" target="//li[div[contains(@class,'product-tile')]//div[contains(@class,'product-pricing')]/span[(contains(@class,'product-sales-price') and (not (contains(text(),'-'))))]]//a[contains(@class,'name-link')]" value="ProductName"/>
  <command name="storeText" target="//li[contains(@class,'grid-tile')]//div[contains(@class,'product-pricing')]/span[(contains(@class,'product-sales-price') and (not (contains(text(),'-'))))]" value="ProductPrice"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="//li[div[contains(@class,'product-tile')]//div[contains(@class,'product-pricing')]/span[(contains(@class,'product-sales-price') and (not (contains(text(),'-'))))]]//a[contains(@class,'name-link')]"/>
  </module>
  <command name="clickAndWait" disabled="true" target="//li[div[contains(@class,'product-tile')]//div[contains(@class,'product-pricing')]/span[(contains(@class,'product-sales-price') and (not (contains(text(),'-'))))]]//a[contains(@class,'name-link')]"/>
  <module name="library.function.FStoreText">
    <parameter name="textElement" value="xpath=id('product-content')/div[contains(@class,'product-number')]/span"/>
    <parameter name="textStoreVariableName" value="ProductID"/>
  </module>
  <command name="storeText" disabled="true" target="xpath=id('product-content')/div[contains(@class,'product-number')]/span" value="ProductID"/>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName}"/>
    <parameter name="Price" value="${ProductPrice}"/>
  </module>
  <action name="OpenSTAFOverlay"/>
  <module name="library.function.FClickAndWaitFor">
    <parameter name="clickElement" value="link=Send to a Friend"/>
    <parameter name="waitForElement" value="id=ui-dialog-title-send-to-friend-dialog"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="css=.send-to-friend"/>
  <command name="click" disabled="true" target="link=Send to a Friend"/>
  <command name="waitForElementPresent" disabled="true" target="id=ui-dialog-title-send-to-friend-dialog"/>
  <action name="CloseSTAFWithX"/>
  <module name="library.function.FClickAndWaitFor">
    <parameter name="clickElement" value="css=.ui-icon-closethick"/>
    <parameter name="waitForElement" value="css=.send-to-friend"/>
  </module>
  <command name="click" disabled="true" target="css=.ui-icon-closethick"/>
  <command name="waitForElementPresent" disabled="true" target="css=.send-to-friend"/>
  <action name="OpenSTAFOverlayAgain" disabled="true"/>
  <command name="click" disabled="true" target="link=Send to a Friend"/>
  <command name="waitForElementPresent" disabled="true" target="id=ui-dialog-title-send-to-friend-dialog"/>
  <action name="CloseSTAFWithCancel" disabled="true"/>
  <module name="library.function.FClick" disabled="true">
    <parameter name="clickElement" value="css= .cancel"/>
  </module>
  <command name="pause" disabled="true" value="4000"/>
  <action name="OpenSTAFOverlayAndLogin"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="link=Send to a Friend"/>
  </module>
  <action name="ClickLogin"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="link=Login or Create an Account"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="link=Login or Create an Account"/>
  <command name="clickAndWait" disabled="true" target="link=Login or Create an Account"/>
  <module name="modules.usermanagement.ValidateLoginPageStructure"/>
  <action name="RegisterUser"/>
  <command name="clickAndWait" target="name=dwfrm_login_register value=Create an Account"/>
  <module name="modules.usermanagement.ValidateCreateAccountPageStructure"/>
  <module name="modules.usermanagement.ValidateCreateAccountRequiredFields"/>
  <action name="CreateAccount">
    <comment>Generates email and password, enters account information and creates account.</comment>
  </action>
  <command name="store" target="${RANDOM.String(8)}@varmail.de" value="Email">
    <comment>Generates a random email address.</comment>
  </command>
  <command name="store" target="${RANDOM.String(9)}" value="Password">
    <comment>Generates a random password.</comment>
  </command>
  <module name="modules.usermanagement.EnterRegisterInformation">
    <parameter name="FirstName" value="${FirstName}"/>
    <parameter name="LastName" value="${LastName}"/>
    <parameter name="EmailWrong" value="abcd"/>
    <parameter name="EmailCorrect" value="${Email}"/>
    <parameter name="PasswordTooShort" value="abcd"/>
    <parameter name="PasswordCorrect" value="${Password}"/>
  </module>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="css=.user-account"/>
  </module>
  <module name="modules.usermanagement.ValidateWelcomePage">
    <parameter name="FirstName" value="${FirstName}"/>
    <parameter name="LastName" value="${LastName}"/>
  </module>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${ProductID}"/>
  </module>
  <action name="OpenSTAFOverlay"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="link=Send to a Friend"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="css=.send-to-friend"/>
  <command name="click" disabled="true" target="link=Send to a Friend"/>
  <module name="modules.catalog.ValidateSTAFOverlayFromPDP"/>
  <action name="OpenPrivacyPolicy"/>
  <module name="library.function.FClick" disabled="true">
    <parameter name="clickElement" value="link=See Privacy Policy"/>
  </module>
  <command name="click" disabled="true" target="link=See Privacy Policy"/>
  <module name="library.function.FAssertCaseInsensitiveTextOnPage">
    <parameter name="text" value="See Privacy Policy"/>
  </module>
  <command name="assertTextPresent" disabled="true" value="See Privacy Policy"/>
  <action name="ClosePrivacyPolicy"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=.ui-icon-closethick"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=.send-to-friend"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="css=.send-to-friend"/>
  <command name="click" disabled="true" target="css=.send-to-friend"/>
  <module name="modules.catalog.ValidateSTAFForms"/>
  <action name="SendMessage"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=#send-to-friend-dialog .send-button"/>
  </module>
  <command name="click" disabled="true" target="css=#send-to-friend-dialog .send-button"/>
  <module name="library.function.FAssertCaseInsensitiveTextOnPage">
    <parameter name="text" value="Your message has been sent."/>
  </module>
  <command name="waitForTextPresent" value="Your message has been sent."/>
  <action name="CloseConfirmationDialog"/>
  <module name="library.function.FClickAndWaitFor">
    <parameter name="clickElement" value="css=.close-button"/>
    <parameter name="waitForElement" value="css=.send-to-friend"/>
  </module>
  <command name="click" disabled="true" target="css=.close-button"/>
  <command name="waitForElementPresent" disabled="true" target="css=.send-to-friend"/>
  <action name="ClosePrivacyPolicyPopup"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=.send-to-friend"/>
  </module>
  <command name="click" disabled="true" target="css=.ui-icon-closethick"/>
  <action name="GoToWelcomePage"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="css=.user-account"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="css=.user-account"/>
  <command name="clickAndWait" disabled="true" target="css=.user-account"/>
  <action name="LogoutAndGoToHomepage"/>
  <module name="modules.usermanagement.LogOutFromWelcomePage"/>
  <action name="GoToHome"/>
  <module name="modules.staticelements.Return2Home"/>
</testcase>
