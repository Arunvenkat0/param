<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" junit-test="true" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <tags>C85053  C84738 C84740</tags>
  <description>Test Case ID:(C85053  C84738 C84740) (C85053 ) Smoke Test » My Account - Returning Customer » Wish List » Public View (C84738 ) Test Suites &amp; Cases » Smoke Test » My Account - Returning Customer » Wish List » Login page (C84740) Smoke Test » My Account - Returning Customer » Wish List » Search Results</description>
  <module name="modules.staticelements.Homepage"/>
  <action name="SearchProduct"/>
  <module name="modules.search.SearchProductByIDOrName">
    <comment>Search for first product</comment>
    <parameter name="SearchText" value="${ProductName}"/>
  </module>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName}"/>
    <parameter name="Price" value="${ProductPrice}"/>
  </module>
  <action name="AddToWishlistAndRegister"/>
  <module name="modules.wishlist.AddToWishlistAndRegister">
    <parameter name="ProductID" value="${ProductID}"/>
    <parameter name="ProductName" value="${ProductName}"/>
    <parameter name="ProductPrice" value="${ProductPrice}"/>
  </module>
  <action name="MakeTheListPublic"/>
  <command name="clickAndWait" target="xpath=id('dwfrm_wishlist_share')//button[@name='dwfrm_wishlist_setListPublic']"/>
  <module name="modules.wishlist.ValidateAccountWishlistPageStructure"/>
  <command name="assertElementPresent" target="css=#dwfrm_wishlist_share button[name='dwfrm_wishlist_setListPrivate']">
    <comment>Checks if the button which makes the list private is present.</comment>
  </command>
  <command name="assertChecked" target="id=dwfrm_wishlist_items_i0_public">
    <comment>Checks if the product is marked as public.</comment>
  </command>
  <action name="GoToWelcomePage"/>
  <command name="waitForElementPresent" target="css=.user-account"/>
  <command name="clickAndWait" target="css=.user-account"/>
  <action name="LogoutAndGoToHomepage"/>
  <module name="modules.usermanagement.LogOutFromWelcomePage"/>
  <action name="GoToHome"/>
  <module name="modules.staticelements.Return2Home"/>
  <action name="OpenWishlistPage"/>
  <command name="clickAndWait" target="link=regexpi:Wish List"/>
  <module name="modules.usermanagement.ValidateWishlistLoginPageStructure"/>
  <action name="FindAWishlist"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_wishlist_search_lastname"/>
    <parameter name="inputString" value="${UserLastName}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_wishlist_search_lastname" value="${UserLastName}"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_wishlist_search_firstname"/>
    <parameter name="inputString" value="${UserFirstName}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_wishlist_search_firstname" value="${UserFirstName}"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_wishlist_search_email"/>
    <parameter name="inputString" value="${Email}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_wishlist_search_email" value="${Email}"/>
  <action name="SubmitWishlistSearch"/>
  <command name="clickAndWait" target="css=#dwfrm_wishlist_search button[name='dwfrm_wishlist_search_search']">
    <comment>Click the search button.</comment>
  </command>
  <command name="assertText" target="css=#primary h1" value="glob:Find Someone's Wish List:">
    <comment>Validate headline on wishlist result page.</comment>
  </command>
  <command name="assertXpathCount" target="id('primary')/table[@class='wish-list-results-table']//tr" value="2">
    <comment>Checks if 2 table rows are present (result row + header row).</comment>
  </command>
  <action name="ViewTheWishlist"/>
  <command name="clickAndWait" target="css=.wish-list-results-table tr:nth-child(2) .view a"/>
  <module name="modules.wishlist.ValidatePublicWishlistPageStructure">
    <parameter name="FirstName" value="${UserFirstName}"/>
    <parameter name="LastName" value="${UserLastName}"/>
  </module>
  <module name="modules.wishlist.ValidateWishlistProductRow">
    <parameter name="TableRow" value="2"/>
    <parameter name="ProductName" value="${ProductName}"/>
    <parameter name="ProductID" value="${ProductID}"/>
    <parameter name="ProductPrice" value="${ProductPrice}"/>
  </module>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_wishlist_search_lastname"/>
    <parameter name="inputString" value="${ILastName}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_wishlist_search_lastname" value="${ILastName}"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_wishlist_search_firstname"/>
    <parameter name="inputString" value="${IFirstName}"/>
  </module>
  <command name="type" target="id=dwfrm_wishlist_search_firstname" value="${IFirstName}"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_wishlist_search_firstname"/>
    <parameter name="inputString" value=""/>
  </module>
  <command name="type" target="id=dwfrm_wishlist_search_email" value=""/>
  <command name="clickAndWait" target="css=#dwfrm_wishlist_search button[name='dwfrm_wishlist_search_search']">
    <comment>Click the search button.</comment>
  </command>
  <command name="assertXpathCount" target="id('primary')/table[@class='wish-list-results-table']//tr" value="0">
    <comment>Checks if 2 table rows are present (result row + header row).</comment>
  </command>
  <command name="assertText" target="//div[contains(@id,'primary')]/p" value="No Wish List has been found for ${ILastName} ${IFirstName} , please try again above."/>
  <action name="GoToHomepage"/>
  <module name="modules.staticelements.Return2Home"/>
</testcase>
