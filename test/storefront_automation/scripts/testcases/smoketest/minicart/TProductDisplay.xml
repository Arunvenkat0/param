<?xml version="1.0" encoding="UTF-8" ?>
<testcase version="3" junit-test="true" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <tags>C84773,C84725,C84726,C84727</tags>
  <description>Test Case ID:(C84773,C84725,C84726,C84727)  (C84773) Smoke Test » Header | Global Navigation | Footer » Cart in Header,  (C84725) Smoke Test » Mini-Cart » Mini-Cart: Opening and Closing</description>
  <module name="modules.staticelements.Homepage"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-empty" value="(0)">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <action name="Product-1"/>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${ProductID1}"/>
  </module>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName1}"/>
    <parameter name="Price" value="${ProductPrice1}"/>
  </module>
  <module name="modules.minicart.MAddProductToEmptyCart">
    <parameter name="Quantity" value="${ProductQuantity1}"/>
    <parameter name="Name" value="${ProductName1}"/>
    <parameter name="PriceProduct" value="${ProductPrice1}"/>
  </module>
  <command name="storeText" target="css=.mini-cart-total .mini-cart-link" value="TestText"/>
  <command name="assertText" disabled="true" target="css=.mini-cart-total .mini-cart-link" value="regexp:^*CART*"/>
  <command name="assertText" disabled="true" target="css=.mini-cart-total .mini-cart-link" value="glob:CART (2) ITEMS, TOTAL: $359.98"/>
  <command name="assertText" disabled="true" target="css=.mini-cart-total .mini-cart-link" value="regexp:CART \(2\) ITEMS, TOTAL: \$359.98"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="regexpi:^Cart \(2\) ITEMS, TOTAL: \$359.98$"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="regexpi:^Cart \(${ProductQuantity1}\) ITEMS, TOTAL: \$359.98$"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="regexpi:^CART \(2\).*$

"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="regexpi:^Cart \(${ProductQuantity1}\).*$"/>
  <command name="assertText" disabled="true" target="css=.mini-cart-total .mini-cart-link" value="Cart (${ProductQuantity1})*">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <action name="DismissQuickViewUsingMouseOver-MouseOut"/>
  <command name="mouseOver" target="css=div.mini-cart-content"/>
  <command name="mouseOut" target="css=div.mini-cart-content"/>
  <command name="waitForNotVisible" target="css=.mini-cart-product:nth-child(1) .mini-cart-name"/>
  <action name="Product-2"/>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${ProductName2}"/>
  </module>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName2}"/>
    <parameter name="Price" value="${ProductPrice2}"/>
  </module>
  <module name="modules.minicart.MAddProductToCart">
    <parameter name="Quantity" value="${ProductQuantity2}"/>
    <parameter name="Name" value="${ProductName2}"/>
    <parameter name="PriceProduct" value="${ProductPrice2}"/>
  </module>
  <command name="storeEval" target="${ProductQuantity1}+${ProductQuantity2}" value="TotalQuantity"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="Cart (${TotalQuantity}) *">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <action name="Product-3"/>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${ProductName3}"/>
  </module>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName3}"/>
    <parameter name="Price" value="${ProductPrice3}"/>
  </module>
  <module name="modules.minicart.MAddProductToCart">
    <parameter name="Quantity" value="${ProductQuantity3}"/>
    <parameter name="Name" value="${ProductName3}"/>
    <parameter name="PriceProduct" value="${ProductPrice3}"/>
  </module>
  <command name="storeEval" target="${TotalQuantity}+${ProductQuantity3}" value="TotalQuantity"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="Cart (${TotalQuantity}) *">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <action name="Product-4"/>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${ProductName4}"/>
  </module>
  <module name="modules.catalog.ValidateProductDetailsPageStructure"/>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName4}"/>
    <parameter name="Price" value="${ProductPrice4}"/>
  </module>
  <module name="modules.minicart.MAddProductToCart">
    <parameter name="Quantity" value="${ProductQuantity4}"/>
    <parameter name="Name" value="${ProductName4}"/>
    <parameter name="PriceProduct" value="${ProductPrice4}"/>
  </module>
  <command name="storeEval" target="${TotalQuantity}+${ProductQuantity4}" value="TotalQuantity"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="Cart (${TotalQuantity}) *">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <action name="Product-Bundle"/>
  <module name="modules.search.SearchProductByIDOrName">
    <parameter name="SearchText" value="${ProductName5}"/>
  </module>
  <module name="modules.catalog.ValidateProductBundlePageStructure"/>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName5}"/>
    <parameter name="Price" value="${ProductPrice5}"/>
  </module>
  <module name="modules.catalog.ValidateProductDataOnDetailsPage">
    <parameter name="Name" value="${ProductName5}"/>
    <parameter name="Price" value="${ProductPrice5}"/>
  </module>
  <module name="modules.minicart.MAddProductBundle">
    <parameter name="Name" value="${ProductName5}"/>
    <parameter name="PriceProduct" value="${ProductPrice5}"/>
    <parameter name="Quantity" value="${ProductQuantity5}"/>
  </module>
  <command name="storeEval" target="${TotalQuantity}+1" value="TotalQuantity"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="Cart (${TotalQuantity}) *">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <action name="AddProductSet"/>
  <module name="modules.search.SearchProductByIDOrName">
    <comment>Search for the product set</comment>
    <parameter name="SearchText" value="${ProductSetName}"/>
  </module>
  <module name="modules.catalog.ValidateProductSetPage">
    <parameter name="NumberOfProducts" value="${NumberOfProductsInSet}"/>
    <parameter name="ProductSetName" value="${ProductSetName}"/>
    <parameter name="FirstProductName" value="${FirstProductName}"/>
    <parameter name="SecondProductName" value="${SecondProductName}"/>
  </module>
  <command name="storeText" target="css=.mini-cart-total-label" value="CartSubTotal"/>
  <command name="storeEval" target="'${CartSubTotal}'.replace(/[^0-9\.]+/g,&quot;&quot;)" value="CartSubTotal">
    <comment>Calculate the total price and store the result.</comment>
  </command>
  <module name="modules.minicart.MAddProductSet"/>
  <module name="modules.minicart.CheckContentOfMiniCart">
    <parameter name="Name" value="${ThirdProductName}"/>
    <parameter name="Quantity" value="1"/>
    <parameter name="PriceProduct" value="${ThirdProductPrice}"/>
    <parameter name="Position" value="1"/>
  </module>
  <module name="modules.minicart.CheckContentOfMiniCart">
    <parameter name="Name" value="${FirstProductName}"/>
    <parameter name="Quantity" value="1"/>
    <parameter name="PriceProduct" value="${FirstProductPrice}"/>
    <parameter name="Position" value="3"/>
  </module>
  <module name="modules.minicart.CheckContentOfMiniCart">
    <parameter name="Name" value="${SecondProductName}"/>
    <parameter name="Quantity" value="1"/>
    <parameter name="PriceProduct" value="${SecondProductPrice}"/>
    <parameter name="Position" value="2"/>
  </module>
  <module name="modules.minicart.MCurrencyToNumber">
    <parameter name="price" value="${FirstProductPrice}"/>
  </module>
  <command name="storeEval" target="parseFloat(${price}+${CartSubTotal}).toFixed(2)" value="CartSubTotal">
    <comment>Calculate the total price and store the result.</comment>
  </command>
  <module name="modules.minicart.MCurrencyToNumber">
    <parameter name="price" value="${SecondProductPrice}"/>
  </module>
  <command name="storeEval" target="parseFloat(${price}+${CartSubTotal}).toFixed(2)" value="CartSubTotal">
    <comment>Calculate the total price and store the result.</comment>
  </command>
  <module name="modules.minicart.MCurrencyToNumber">
    <parameter name="price" value="${ThirdProductPrice}"/>
  </module>
  <command name="storeEval" target="parseFloat(${price}+${CartSubTotal}).toFixed(2)" value="CartSubTotal">
    <comment>Calculate the total price and store the result.</comment>
  </command>
  <module name="modules.minicart.MNumberToCurrency">
    <parameter name="price" value="${CartSubTotal}"/>
  </module>
  <command name="storeEval" target="${TotalQuantity}+3" value="TotalQuantity"/>
  <command name="assertText" target="css=.mini-cart-total .mini-cart-link" value="Cart (${TotalQuantity}) *">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <module name="modules.cart.GotoCart">
    <comment>Go to Cart View</comment>
  </module>
  <command name="assertText" target="css=.order-totals-table .order-subtotal" value="Subtotal ${price}">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <command name="assertText" target="css=.order-totals-table .order-sales-tax" value="Sales Tax  N/A">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <command name="assertText" target="css=.order-totals-table .order-shipping" value="Shipping N/A">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <command name="assertText" target="css=.order-totals-table .order-total" value="Estimated Total ${price}">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <module name="modules.staticelements.Homepage"/>
</testcase>
