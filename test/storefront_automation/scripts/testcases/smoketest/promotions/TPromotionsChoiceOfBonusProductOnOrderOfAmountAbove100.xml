<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" junit-test="true">
  <tags>C130263</tags>
  <description>BUG Test Case ID:(C130263)</description>
  <module name="library.module.app.busmgr.EnablePromotion">
    <parameter name="SiteName" value="${SiteName}"/>
    <parameter name="PromotionName" value="${PromotionName}"/>
  </module>
  <module name="library.module.app.sitegenesis.OpenShoppingSite"/>
  <module name="library.module.app.sitegenesis.OpenCatalogDisplayCategoryLevel3">
    <parameter name="Level1CategoryName" value="${CatalogLevel1}"/>
    <parameter name="Level2CategoryName" value="${CatalogLevel2}"/>
    <parameter name="Level3CategoryName" value="${CatalogLevel3}"/>
  </module>
  <action name="SelectProduct"/>
  <action name="Refine"/>
  <module name="library.module.app.sitegenesis.SelectPriceRefinement">
    <parameter name="PriceLabelText" value="$50 - $99.99"/>
  </module>
  <command name="pause" value="1500"/>
  <action name="SelectProduct"/>
  <module name="library.module.app.sitegenesis.ClickProductQuickViewLink">
    <parameter name="ProductName" value="${ProductName}"/>
  </module>
  <action name="UseQuickViewToAddProductToCart"/>
  <module name="library.module.app.sitegenesis.AddToCart"/>
  <module name="library.module.app.sitegenesis.OpenShoppingCart"/>
  <action name="VERIFY-NoPromoCallout"/>
  <command name="assertXpathCount" target="//*[contains(text(),'${PromotionName}')]" value="0"/>
  <action name="ChangeQuantity"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="css=input.input-text[name='dwfrm_cart_shipments_i0_items_i0_quantity']"/>
    <parameter name="inputString" value="2"/>
  </module>
  <module name="library.module.app.sitegenesis.ClickUpdateCartButton"/>
  <action name="VERIFY-PromoCalloutDisplayed"/>
  <module name="library.function.FAssertElementPresent">
    <parameter name="assertedElement" value="css=a.select-bonus[title='Select Bonus Product']"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=td.bonus-item-details"/>
    <parameter name="textPattern" value="regexp:.*${PromotionName}.*"/>
  </module>
  <action name="AddABonusProduct"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=a.select-bonus"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=button.button-select-bonus"/>
  </module>
  <action name="VERIFY-BonusPopUp"/>
  <module name="library.function.FAssertElementPresent">
    <parameter name="assertedElement" value="css=span#ui-dialog-title-bonus-product-dialog"/>
  </module>
  <action name="AddABonusToTheCart"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="//ul[@class='swatches Color']//a[contains(text(),'Light Blue')]"/>
  </module>
  <module name="library.function.FClickAndWait" disabled="true">
    <parameter name="clickElement" value="//ul[@class='swatches Color']//a[contains(text(),'Light Blue')]"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="//div[@id='bonus-product-list']/div[@class='bonus-product-item'][1]"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=button.add-to-cart-bonus"/>
  </module>
  <module name="library.function.FClick" disabled="true">
    <parameter name="clickElement" value=""/>
  </module>
  <action name="VERIFY-BonusProductAdded"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value=""/>
    <parameter name="textPattern" value=""/>
  </module>
  <action name="CleanUp"/>
  <module name="library.module.app.busmgr.DisablePromotion">
    <parameter name="SiteName" value="${SiteName}"/>
    <parameter name="PromotionName" value="${PromotionName}"/>
  </module>
</testcase>