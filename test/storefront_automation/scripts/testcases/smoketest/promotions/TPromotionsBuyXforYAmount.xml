<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" junit-test="true">
  <tags>C130272</tags>
  <description>Test Case ID:(C130272)</description>
  <module name="library.module.app.busmgr.EnablePromotion">
    <parameter name="SiteName" value="${SiteName}"/>
    <parameter name="PromotionName" value="${PromotionName}"/>
  </module>
  <module name="library.module.app.sitegenesis.OpenShoppingSite"/>
  <action name="SearchForProduct"/>
  <module name="library.module.app.sitegenesis.Search">
    <parameter name="SearchString" value="${ProductName1}"/>
  </module>
  <action name="VERIFY-PromoMessage"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.promotion-callout"/>
    <parameter name="textPattern" value="${PromotionName} Details ${PromotionName}"/>
  </module>
  <action name="UseQuickViewToAddProductToCart"/>
  <module name="library.module.app.sitegenesis.AddToCart"/>
  <module name="library.module.app.sitegenesis.OpenShoppingCart"/>
  <action name="ChangeQty"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="//input[@name='dwfrm_cart_shipments_i0_items_i0_quantity']"/>
    <parameter name="inputString" value="5"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=#update-cart"/>
  </module>
  <action name="VERIFY-ShoppingCart"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.promo"/>
    <parameter name="textPattern" value="- ${PromotionName}"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.promo-adjustment"/>
    <parameter name="textPattern" value="${PromotionName}"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-subtotal &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="$50.00"/>
  </module>
  <action name="ChangeQty"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="//input[@name='dwfrm_cart_shipments_i0_items_i0_quantity']"/>
    <parameter name="inputString" value="4"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=#update-cart"/>
  </module>
  <action name="VERIFY-ShoppingCart"/>
  <command name="pause" value="1500"/>
  <command name="assertXpathCount" target="//*[contains(text(),'${PromotionName}')]" value="0"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-subtotal &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="$1,201.20"/>
  </module>
  <action name="SearchProduct2"/>
  <module name="library.module.app.sitegenesis.Search">
    <parameter name="SearchString" value="${ProductName2}"/>
  </module>
  <module name="library.module.app.sitegenesis.AddToCart"/>
  <module name="library.module.app.sitegenesis.OpenShoppingCart"/>
  <action name="VERIFY-ShoppingCart"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=tr.cart-row:nth-child(1) &gt; td:nth-child(6) &gt; div:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName}"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=tr.cart-row:nth-child(2) &gt; td:nth-child(6) &gt; div:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName}"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-subtotal &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="$50.00"/>
  </module>
  <action name="ChangeQty"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="//input[@name='dwfrm_cart_shipments_i0_items_i0_quantity']"/>
    <parameter name="inputString" value="5"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=#update-cart"/>
  </module>
  <action name="VERIFY-ShoppingCart"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=tr.cart-row:nth-child(1) &gt; td:nth-child(6) &gt; div:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName}"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.price-total"/>
    <parameter name="textPattern" value="$129.99"/>
  </module>
  <action name="ChangeQty"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="//input[@name='dwfrm_cart_shipments_i0_items_i1_quantity']"/>
    <parameter name="inputString" value="5"/>
  </module>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=#update-cart"/>
  </module>
  <action name="VERIFY-ShoppingCart"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=tr.cart-row:nth-child(1) &gt; td:nth-child(6) &gt; div:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName}"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=tr.cart-row:nth-child(2) &gt; td:nth-child(6) &gt; div:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName}"/>
  </module>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-subtotal &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="$100.00"/>
  </module>
  <action name="CleanUp"/>
  <module name="library.module.app.busmgr.DisablePromotion">
    <parameter name="SiteName" value="${SiteName}"/>
    <parameter name="PromotionName" value="${PromotionName}"/>
  </module>
</testcase>