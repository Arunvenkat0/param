<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" junit-test="true">
  <tags>C130264</tags>
  <description>Test Case ID:(C130264)</description>
  <module name="library.module.app.busmgr.EnableExclusivePromotion">
    <parameter name="SiteName" value="${SiteName}"/>
    <parameter name="PromotionName" value="${PromotionName}"/>
  </module>
  <module name="library.module.app.sitegenesis.OpenShoppingSite"/>
  <module name="library.module.app.sitegenesis.OpenCatalogDisplayCategoryLevel2">
    <parameter name="Level1CategoryName" value="${CatalogLevel1}"/>
    <parameter name="Level2CategoryName" value="${CatalogLevel2}"/>
  </module>
  <action name="VERIFY-PromoCalloutIsVisisble"/>
  <module name="library.function.FAssertCountOnPage">
    <parameter name="string" value="${PromotionName}"/>
    <parameter name="numberExpected" value="12"/>
  </module>
  <action name="Refine"/>
  <module name="library.module.app.sitegenesis.productgriddisplay.SelectPriceRefinement">
    <parameter name="PriceLabelText" value="$20 - $49.99"/>
  </module>
  <action name="SelectProduct"/>
  <module name="library.module.app.sitegenesis.productgriddisplay.ClickProductQuickViewLink">
    <parameter name="ProductName" value="${ProductName}"/>
  </module>
  <action name="UseQuickViewToAddProductToCart"/>
  <module name="library.module.app.sitegenesis.quickview.AddToCart"/>
  <module name="library.module.app.sitegenesis.header.OpenShoppingCart"/>
  <action name="VERIFY-PromoMessageNOTDisplayed"/>
  <module name="library.function.FAssertCountOnPage">
    <parameter name="string" value="${PromotionName}"/>
    <parameter name="numberExpected" value="0"/>
  </module>
  <action name="ChangeQuantity"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="css=input.input-text[name='dwfrm_cart_shipments_i0_items_i0_quantity']"/>
    <parameter name="inputString" value="2"/>
  </module>
  <module name="library.module.app.sitegenesis.cart.ClickUpdateCartButton"/>
  <action name="VERIFY-ApproachingPromoMessageIsDisplayed"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.cart-promo-approaching"/>
    <parameter name="textPattern" value="Purchase $32.00 more and receive ${PromotionName}"/>
  </module>
  <action name="ChangeQuantityAgain"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="css=input.input-text[name='dwfrm_cart_shipments_i0_items_i0_quantity']"/>
    <parameter name="inputString" value="3"/>
  </module>
  <module name="library.module.app.sitegenesis.cart.ClickUpdateCartButton"/>
  <action name="VERIFY-NoApproachingPromoMessage"/>
  <command name="assertNotElementPresent" target="css=.cart-promo-approaching"/>
  <action name="VERIFY-PromotionMessageBelowProduct"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.cart-promo &gt; div:nth-child(1) &gt; span:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName}"/>
  </module>
  <action name="VERIFY-OrderDiscountBelowSubtotal"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-discount &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="${ExpectedDiscount}"/>
  </module>
  <action name="VERIFY-EstimatedTotalUpdatedWithPromotionValue"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-total &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="${ExpectedEstimatedTotal}"/>
  </module>
  <action name="CleanUpPromotions"/>
  <module name="library.module.app.busmgr.DisablePromotion">
    <parameter name="SiteName" value="${SiteName}"/>
    <parameter name="PromotionName" value="${PromotionName}"/>
  </module>
</testcase>