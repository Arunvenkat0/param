<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="4" junit-test="true">
  <tags>C131713</tags>
  <description>Test Case ID:(C131713)</description>
  <module name="library.module.app.busmgr.BusinessManagerEnableTwoPromotions">
    <parameter name="SiteName" value="${SiteName}"/>
    <parameter name="PromotionName1" value="${PromotionName1}"/>
    <parameter name="PromotionName2" value="${PromotionName2}"/>
  </module>
  <module name="library.module.app.sitegenesis.OpenShoppingSite"/>
  <action name="SelectFirstProduct"/>
  <module name="library.module.app.sitegenesis.OpenCatalogDisplayCategoryLevel3">
    <parameter name="Level1CategoryName" value="${CatalogLevel1}"/>
    <parameter name="Level2CategoryName" value="${CatalogLevel2}"/>
    <parameter name="Level3CategoryName" value="${CatalogLevel3}"/>
  </module>
  <module name="library.module.app.sitegenesis.productgriddisplay.ClickProductQuickViewLink">
    <parameter name="ProductName" value="${ProductName1}"/>
  </module>
  <module name="library.module.app.sitegenesis.quickview.SelectSize">
    <parameter name="Size" value="${Size}"/>
  </module>
  <module name="library.module.app.sitegenesis.quickview.SelectWidth">
    <parameter name="Width" value="${Width}"/>
  </module>
  <module name="library.module.app.sitegenesis.quickview.AddToCart"/>
  <action name="VERIFY-PromoMessageDisplayed"/>
  <module name="library.module.app.sitegenesis.header.OpenShoppingCart"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.cart-promo &gt; div:nth-child(1) &gt; span:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName1}"/>
  </module>
  <action name="VERIFY-PromoMessageNOTDisplayed"/>
  <module name="library.function.FAssertCountOnPage">
    <parameter name="string" value="${PromotionName2}"/>
    <parameter name="numberExpected" value="0"/>
  </module>
  <action name="VERIFY-PromoDiscount"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-discount &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="${OrderDiscountAmount}"/>
  </module>
  <action name="VERIFY-PromoEstimatedTotal"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-total &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="${EstimatedTotalWithDiscount}"/>
  </module>
  <action name="SelectSecondProduct"/>
  <module name="library.module.app.sitegenesis.OpenCatalogDisplayCategoryLevel2">
    <parameter name="Level1CategoryName" value="${CatalogLevel1Product2}"/>
    <parameter name="Level2CategoryName" value="${CatalogLevel2Product2}"/>
  </module>
  <module name="library.module.app.sitegenesis.productgriddisplay.SelectPriceRefinement">
    <parameter name="PriceLabelText" value="${Product2Refinement}"/>
  </module>
  <module name="library.module.app.sitegenesis.productgriddisplay.SelectSorting">
    <parameter name="SortSelectionName" value="Price High To Low"/>
  </module>
  <module name="library.module.app.sitegenesis.productgriddisplay.ClickProductQuickViewLink">
    <parameter name="ProductName" value="${ProductName2}"/>
  </module>
  <module name="library.module.app.sitegenesis.quickview.SelectSize">
    <parameter name="Size" value="${Product2Size}"/>
  </module>
  <module name="library.module.app.sitegenesis.quickview.AddToCart"/>
  <action name="VERIFY-PromoMessageDisplayed"/>
  <module name="library.module.app.sitegenesis.header.OpenShoppingCart"/>
  <action name="VERIFY-FirstProduct-NoPromoMessage"/>
  <command name="assertNotElementPresent" target="css=tr.cart-row:nth-child(1) .promo-adjustment"/>
  <action name="VERIFY-OrderDiscountPromoMessage"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css= .cart-promo &gt; div:nth-child(1) &gt; span:nth-child(2)"/>
    <parameter name="textPattern" value="${PromotionName2}"/>
  </module>
  <action name="VERIFY-PromoMessageNOTDisplayed"/>
  <module name="library.function.FAssertCountOnPage">
    <parameter name="string" value="${PromotionName1}"/>
    <parameter name="numberExpected" value="0"/>
  </module>
  <action name="VERIFY-OrderDiscount"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.order-discount &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="- $114.50"/>
  </module>
  <action name="VERIFY-PromoEstimatedTotal"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css= .order-total &gt; td:nth-child(2)"/>
    <parameter name="textPattern" value="$414.49"/>
  </module>
  <action name="VERIFY-Product2-ItemTotal"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=tr.cart-row:nth-child(2) .price-total"/>
    <parameter name="textPattern" value="$229.00"/>
  </module>
  <action name="CleanUp"/>
  <module name="library.module.app.busmgr.BusinessMgrDisableAllPromotions">
    <parameter name="SiteName" value="${SiteName}"/>
  </module>
</testcase>