<?xml version="1.0" encoding="UTF-8"?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Adds a product to a wishlist and creates a new user.</description>
  <parameter name="ProductID"/>
  <parameter name="ProductName"/>
  <parameter name="ProductPrice"/>
  <action name="ClickAddToWishlist"/>
  <command name="clickAndWait" target="link=Add to Wishlist"/>
  <module name="modules.usermanagement.ValidateWishlistLoginPageStructure"/>
  <action name="ClickCreateAccount"/>
  <command name="clickAndWait" target="css=#dwfrm_login_register button"/>
  <module name="modules.usermanagement.ValidateCreateAccountPageStructure"/>
  <module name="modules.usermanagement.ValidateCreateAccountRequiredFields"/>
  <action name="CreateAccount">
    <comment>Generates email and password, enters account information and creates account.</comment>
  </action>
  <command name="store" target="${RANDOM.String(8)}@varmail.de" value="Email">
    <comment>Generates a random email address.</comment>
  </command>
  <command name="store" target="${RANDOM.String(7)}" value="Password">
    <comment>Generates a random password.</comment>
  </command>
  <module name="modules.usermanagement.EnterRegisterInformation">
    <parameter name="FirstName" value="${UserFirstName}"/>
    <parameter name="LastName" value="${UserLastName}"/>
    <parameter name="EmailWrong" value="abcde.de"/>
    <parameter name="EmailCorrect" value="${Email}"/>
    <parameter name="PasswordTooShort" value="pass"/>
    <parameter name="PasswordCorrect" value="${Password}"/>
  </module>
  <module name="modules.wishlist.ValidateAccountWishlistPageStructure"/>
  <command name="assertElementPresent" target="css=#dwfrm_wishlist_share button[name='dwfrm_wishlist_setListPublic']"/>
  <action name="ValidateProductOnWishlist"/>
  <command name="assertXpathCount" target="id('primary')/table[@class='item-list']/tbody/tr" value="2">
    <comment>Validate the number of products plus the headline row</comment>
  </command>
  <module name="modules.wishlist.ValidateWishlistProductRow">
    <parameter name="TableRow" value="2"/>
    <parameter name="ProductName" value="@{ProductName}"/>
    <parameter name="ProductID" value="@{ProductID}"/>
    <parameter name="ProductPrice" value="@{ProductPrice}"/>
  </module>
</scriptmodule>