<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Validates the STAF forms. 
Validates at first the correct error handling if mandator fields are empty or filled with invalid data. 
Valdiates if the correct entered data is shown at the preview form.
Validates if edited data is shown correctly at the preview form.
Verifies if the STAF can be sent and if the confirmation overlay is shown.</description>
  <action name="SendToAFriend">
    <comment>Click open the Send to a Friend dialog.</comment>
  </action>
  <action name="EnterIncorrectData"/>
  <command name="waitForElementPresent" target="id=dwfrm_sendtofriend_friendsemail"/>
  <command name="pause" disabled="true" value="1000">
    <comment>Needed to prevent subsequent 'type' attempt from failing.</comment>
  </command>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_friendsemail"/>
    <parameter name="inputString" value="abcd"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_friendsemail" value="abcd"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_confirmfriendsemail"/>
    <parameter name="inputString" value="abcd"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="id=dwfrm_sendtofriend_confirmfriendsemail"/>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="abcd"/>
  <action name="AndCheckResult"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=.preview-button"/>
  </module>
  <command name="click" disabled="true" target="css=.preview-button"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=#dwfrm_sendtofriend_friendsname + span"/>
    <parameter name="textPattern" value="Please enter your friend's name"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="css=#dwfrm_sendtofriend_friendsname + span"/>
  <command name="assertText" disabled="true" target="css=#dwfrm_sendtofriend_friendsname + span" value="Please enter your friend's name"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=#dwfrm_sendtofriend_friendsemail + span"/>
    <parameter name="textPattern" value="The email address is invalid."/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="css=#dwfrm_sendtofriend_friendsemail + span"/>
  <command name="assertText" disabled="true" target="css=#dwfrm_sendtofriend_friendsemail + span" value="The email address is invalid."/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=#dwfrm_sendtofriend_confirmfriendsemail + span"/>
    <parameter name="textPattern" value="The email address is invalid."/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="css=#dwfrm_sendtofriend_confirmfriendsemail + span"/>
  <command name="assertText" disabled="true" target="css=#dwfrm_sendtofriend_confirmfriendsemail + span" value="The email address is invalid."/>
  <action name="EnterCorrectData">
    <comment>Password, Email</comment>
  </action>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_friendsname"/>
    <parameter name="inputString" value="${FriendsName}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_friendsname" value="${FriendsName}"/>
  <command name="store" target="${RANDOM.String(8)}@varmail.de" value="FriendsEmail"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_friendsemail"/>
    <parameter name="inputString" value="${FriendsEmail}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_friendsemail" value="${FriendsEmail}"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_confirmfriendsemail"/>
    <parameter name="inputString" value="${FriendsEmail}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="${FriendsEmail}"/>
  <command name="store" target="${RANDOM.String(125)}" value="Message"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_message"/>
    <parameter name="inputString" value="${Message}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_message" value="${Message}"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.char-count"/>
    <parameter name="textPattern" value="You have 125 characters left out of 250"/>
  </module>
  <command name="assertText" disabled="true" target="css=.char-count" value="You have 125 characters left out of 250"/>
  <action name="OpenPreview"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=#send-to-friend-main .preview-button"/>
  </module>
  <command name="click" disabled="true" target="css=#send-to-friend-main .preview-button"/>
  <module name="library.function.FWaitForText">
    <parameter name="textElement" value="css=#send-to-friend-main h2"/>
    <parameter name="text" value="Review Your Message"/>
  </module>
  <command name="waitForText" disabled="true" target="css=#send-to-friend-main h2" value="Review Your Message"/>
  <command name="assertTextPresent" value="${FriendsName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FriendsEmail}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${Email}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FirstName} ${LastName}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductID}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertElementPresent" target="css=.send-to-friend-product .product-image img"/>
  <command name="assertTextPresent" value="glob:*Message:*${Message}*"/>
  <action name="EditEmailAndMessage"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="name=dwfrm_sendtofriend_edit value=Edit"/>
  </module>
  <command name="click" disabled="true" target="name=dwfrm_sendtofriend_edit value=Edit"/>
  <command name="waitForElementPresent" target="id=dwfrm_sendtofriend_friendsemail"/>
  <command name="store" target="${RANDOM.String(8)}@varmail.de" value="FriendsEmail"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_friendsemail"/>
    <parameter name="inputString" value="${FriendsEmail}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_friendsemail" value="${FriendsEmail}"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_confirmfriendsemail"/>
    <parameter name="inputString" value="${FriendsEmail}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="${FriendsEmail}"/>
  <command name="store" target="${RANDOM.String(125)}" value="Message"/>
  <module name="library.function.FType">
    <parameter name="typeElement" value="id=dwfrm_sendtofriend_message"/>
    <parameter name="inputString" value="${Message}"/>
  </module>
  <command name="type" disabled="true" target="id=dwfrm_sendtofriend_message" value="${Message}"/>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.char-count"/>
    <parameter name="textPattern" value="You have 125 characters left out of 250"/>
  </module>
  <command name="assertText" disabled="true" target="css=.char-count" value="You have 125 characters left out of 250"/>
  <action name="OpenPreviewAgain"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=#send-to-friend-main .preview-button"/>
  </module>
  <command name="click" disabled="true" target="css=#send-to-friend-main .preview-button"/>
  <module name="library.function.FWaitForText">
    <parameter name="textElement" value="css=#send-to-friend-main h2"/>
    <parameter name="text" value="Review Your Message"/>
  </module>
  <command name="waitForText" disabled="true" target="css=#send-to-friend-main h2" value="Review Your Message"/>
  <command name="assertTextPresent" value="${FriendsName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FriendsEmail}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${Email}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FirstName} ${LastName}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductID}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertElementPresent" target="css=.send-to-friend-product .product-image img"/>
  <command name="assertTextPresent" value="glob:*Message:*${Message}*"/>
</scriptmodule>
