<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Validates the STAF forms. 
Validates at first the correct error handling if mandator fields are empty or filled with invalid data. 
Valdiates if the correct entered data is shown at the preview form.
Validates if edited data is shown correctly at the preview form.
Verifies if the STAF can be sent and if the confirmation overlay is shown.</description>
  <action name="SendToAFriend">
    <comment>Click open the Send to a Friend dialog.</comment>
  </action>
  <action name="EnterIncorrectData"/>
  <command name="waitForElementPresent" target="id=dwfrm_sendtofriend_friendsemail"/>
  <command name="pause" value="1000">
    <comment>Needed to prevent subsequent 'type' attempt from failing.</comment>
  </command>
  <command name="type" target="id=dwfrm_sendtofriend_friendsemail" value="abcd"/>
  <command name="waitForElementPresent" target="id=dwfrm_sendtofriend_confirmfriendsemail"/>
  <command name="type" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="abcd"/>
  <action name="AndCheckResult"/>
  <command name="click" target="css=.preview-button"/>
  <command name="waitForElementPresent" target="css=#dwfrm_sendtofriend_friendsname + span"/>
  <command name="assertText" target="css=#dwfrm_sendtofriend_friendsname + span" value="Please enter your friend's name"/>
  <command name="waitForElementPresent" target="css=#dwfrm_sendtofriend_friendsemail + span"/>
  <command name="assertText" target="css=#dwfrm_sendtofriend_friendsemail + span" value="The email address is invalid."/>
  <command name="waitForElementPresent" target="css=#dwfrm_sendtofriend_confirmfriendsemail + span"/>
  <command name="assertText" target="css=#dwfrm_sendtofriend_confirmfriendsemail + span" value="The email address is invalid."/>
  <action name="EnterCorrectData">
    <comment>Password, Email</comment>
  </action>
  <command name="type" target="id=dwfrm_sendtofriend_friendsname" value="${FriendsName}"/>
  <command name="store" target="${RANDOM.String(8)}@varmail.de" value="FriendsEmail"/>
  <command name="type" target="id=dwfrm_sendtofriend_friendsemail" value="${FriendsEmail}"/>
  <command name="type" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="${FriendsEmail}"/>
  <command name="store" target="${RANDOM.String(125)}" value="Message"/>
  <command name="type" target="id=dwfrm_sendtofriend_message" value="${Message}"/>
  <command name="assertText" target="css=.char-count" value="You have 125 characters left out of 250"/>
  <action name="OpenPreview"/>
  <command name="click" target="css=#send-to-friend-main .preview-button"/>
  <command name="waitForText" target="css=#send-to-friend-main h2" value="Review Your Message"/>
  <command name="assertTextPresent" value="${FriendsName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FriendsEmail}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${Email}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FirstName} ${LastName}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductID}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertElementPresent" target="css=.send-to-friend-product .product-image img"/>
  <command name="assertTextPresent" value="glob:*Message:*${Message}*"/>
  <action name="EditEmailAndMessage"/>
  <command name="click" target="name=dwfrm_sendtofriend_edit value=Edit"/>
  <command name="waitForElementPresent" target="id=dwfrm_sendtofriend_friendsemail"/>
  <command name="store" target="${RANDOM.String(8)}@varmail.de" value="FriendsEmail"/>
  <command name="type" target="id=dwfrm_sendtofriend_friendsemail" value="${FriendsEmail}"/>
  <command name="type" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="${FriendsEmail}"/>
  <command name="store" target="${RANDOM.String(125)}" value="Message"/>
  <command name="type" target="id=dwfrm_sendtofriend_message" value="${Message}"/>
  <command name="assertText" target="css=.char-count" value="You have 125 characters left out of 250"/>
  <action name="OpenPreviewAgain"/>
  <command name="click" target="css=#send-to-friend-main .preview-button"/>
  <command name="waitForText" target="css=#send-to-friend-main h2" value="Review Your Message"/>
  <command name="assertTextPresent" value="${FriendsName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FriendsEmail}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${Email}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${FirstName} ${LastName}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductName}">
    <comment>Checks for the correct product name to be displayed.</comment>
  </command>
  <command name="assertTextPresent" value="${ProductID}">
    <comment>Checks for the correct displayed price.</comment>
  </command>
  <command name="assertElementPresent" target="css=.send-to-friend-product .product-image img"/>
  <command name="assertTextPresent" value="glob:*Message:*${Message}*"/>
</scriptmodule>
