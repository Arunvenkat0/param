<?xml version="1.0" encoding="UTF-8"?>
<scriptmodule xmlns="http://xlt.xceptance.com/xlt-script/2" version="4">
  <description>Some products offer to change there color (swatches):
- hover -&gt; change of color -&gt; mouseOut -&gt; initial color
- click -&gt; permanent change
- permanently changed colors appear in details and quickview</description>
  <parameter name="SubCategoryName"/>
  <module name="library.function.FWaitForElement">
    <parameter name="element" value="css=.product-image &gt; a.thumb-link"/>
  </module>
  <module name="library.function.FWaitForElement" disabled="true">
    <parameter name="element" value="dom=document.getElementsByClassName('selected')[0].getElementsByTagName('img')[0]"/>
  </module>
  <module name="library.function.FStoreText">
    <parameter name="textElement" value="css=#search-result-items li:nth-child(1) div.product-name a.name-link"/>
    <parameter name="textStoreVariableName" value="ProductName"/>
  </module>
  <command name="storeEval" disabled="true" target="document.getElementsByClassName('selected')[0].getElementsByTagName('img')[0].getAttribute('title').split(&quot;,&quot;,1)" value="ProductName"/>
  <module name="library.function.FStoreText">
    <parameter name="textElement" value=""/>
    <parameter name="textStoreVariableName" value="DefaultColor"/>
  </module>
  <command name="storeEval" target="document.getElementsByClassName('selected')[0].getAttribute('title')" value="DefaultColor"/>
  <module name="library.function.FStoreText">
    <parameter name="textElement" value=""/>
    <parameter name="textStoreVariableName" value="AvailableColor2"/>
  </module>
  <command name="storeEval" target="document.getElementsByClassName('swatch')[1].getAttribute('title')" value="AvailableColor2"/>
  <action name="CheckAvailableColors"/>
  <module name="modules.catalog.CheckAvailableColorsOnCategoryPage"/>
  <action name="SelectAlternativeColorAndCheckResult"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="xpath=(//div[@class='product-name']//a[@title=&quot;${ProductName}&quot;]/../../..//a)[contains(concat(' ',@class,' '), ' swatch ') and @title='${AvailableColor2}']"/>
  </module>
  <module name="modules.catalog.ValidateSwatchColorChange">
    <parameter name="SelectedColor" value="${AvailableColor2}"/>
  </module>
  <action name="SelectDefaultColorAndCheckResult"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="link=@{SubCategoryName}"/>
  </module>
  <module name="modules.catalog.ValidateSwatchColorChange">
    <parameter name="SelectedColor" value="${DefaultColor}"/>
  </module>
</scriptmodule>