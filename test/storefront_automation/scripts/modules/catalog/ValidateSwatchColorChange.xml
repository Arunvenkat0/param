<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Validates the selected color inside quick view and product details page

Steps:
Select an available color
Validate image of selected color (on category page)
Validate it remains the selected color (inside quick view)
Validate it remains the selected color (on product details page)</description>
  <parameter name="SelectedColor"/>
  <action name="ValidateSwatchResultInQuickView"/>
  <module name="modules.catalog.OpenQuickView"/>
  <module name="library.function.FAssertElementPresent">
    <parameter name="assertedElement" value="css=.swatchanchor[title=&quot;@{SelectedColor}&quot;]"/>
  </module>
  <action name="CloseQuickview"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=.ui-dialog-titlebar-close"/>
  </module>
  <action name="ValidateSwatchResultOnProductPage"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="xpath=//div[@class='product-name']//a[@title=&quot;${ProductName}&quot;]"/>
  </module>
  <module name="library.function.FWaitForText">
    <parameter name="textElement" value="css=.breadcrumb .last"/>
    <parameter name="text" value="${ProductName}"/>
  </module>
  <command name="waitForElementPresent" target="css=.Color li.selected"/>
  <module name="library.function.FWaitForText">
    <parameter name="textElement" value="css=.Color li.selected a"/>
    <parameter name="text" value="@{SelectedColor}"/>
  </module>
</scriptmodule>
