<?xml version="1.0" encoding="UTF-8"?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Validates the selected color inside quick view and product details page

Steps:
Select an available color
Validate image of selected color (on category page)
Validate it remains the selected color (inside quick view)
Validate it remains the selected color (on product details page)</description>
  <parameter name="ProductName"/>
  <parameter name="SelectedColor"/>
  <action name="ValidateSwatchResultInQuickView"/>
  <module name="modules.catalog.OpenQuickView">
    <parameter name="ProductName" value="@{ProductName}"/>
  </module>
  <command name="waitForText" disabled="true" target="css=.Color .selected-value" value="@{SelectedColor}">
    <comment>Title of the color is not displayed for all products and colors - so command is disabled right now.</comment>
  </command>
  <command name="assertElementPresent" target="css=.swatchanchor[title=&quot;@{SelectedColor}&quot;]">
    <comment>Check if the correct swatch is selected.</comment>
  </command>
  <command name="click" target="link=close"/>
  <action name="ValidateSwatchResultOnProductPage"/>
  <command name="clickAndWait" target="xpath=//div[@class='product-name']//a[@title=&quot;@{ProductName}&quot;]"/>
  <command name="waitForText" target="css=.breadcrumb .last" value="@{ProductName}"/>
  <command name="waitForElementPresent" target="css=.Color li.selected"/>
  <command name="waitForText" target="css=.Color li.selected a" value="@{SelectedColor}"/>
</scriptmodule>