<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>In the detail product view you can switch to the product before and to the product next. Exceptions are:
- there is no product before
- there is no product next

Approach:
- First Product (check only navigation next exists)
- Second Product (check next and previous nav exists)
- Back to product list and navigate to last product (check no next but previous)</description>
  <parameter name="SubCategoryName"/>
  <module name="modules.catalog.CheckNavigationOnFirstProductPage"/>
  <module name="modules.catalog.CheckNavigationOnMiddleProductPage">
    <parameter name="NavigateToProduct" value="previous"/>
  </module>
  <action name="ClickSubcategoryInBreadcrumb"/>
  <module name="library.function.FClickAndWaitForPageLoad">
    <parameter name="clickElement" value="link=@{SubCategoryName}"/>
  </module>
  <command name="clickAndWait" disabled="true" target="link=@{SubCategoryName}">
    <comment>Open subcategory again - first page.</comment>
  </command>
  <command name="waitForElementPresent" target="css=.page-last"/>
  <action name="OpenLastPage"/>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="css=.page-last"/>
  </module>
  <command name="click" disabled="true" target="css=.page-last">
    <comment>Click last page link.</comment>
  </command>
  <command name="waitForElementPresent" target="css=.page-first"/>
  <command name="storeEval" target="document.getElementsByClassName('product-name').item(document.getElementsByClassName('product-name').length-1).textContent.trim()" value="LastProductName"/>
  <module name="modules.catalog.CheckNavigationOnLastProductPage"/>
</scriptmodule>
