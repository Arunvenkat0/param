<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Checks the correctness of the search result when &quot;View all&quot; is selected.</description>
  <command name="waitForElementPresent" target="name=Product-Paging-Options"/>
  <command name="storeEval" target="document.getElementsByClassName('results-hits')[1].innerHTML.trimRight().substr(-10,3).trimRight()" value="MaxItems"/>
  <action name="SelectPagingOption"/>
  <module name="library.function.FSelect">
    <parameter name="element" value="css=.search-result-options .items-per-page select"/>
    <parameter name="selection" value="label=View All (${MaxItems})"/>
  </module>
  <command name="select" disabled="true" target="css=.search-result-options .items-per-page select" value="label=View All (${MaxItems})">
    <comment>Select the &quot;View all&quot; option.</comment>
  </command>
  <module name="library.function.FWaitForText">
    <parameter name="textElement" value="css=.search-result-options:nth-child(2) .items-per-page select option[selected]"/>
    <parameter name="text" value="View All (${MaxItems})"/>
  </module>
  <command name="waitForText" disabled="true" target="css=.search-result-options:nth-child(2) .items-per-page select option[selected]" value="View All (${MaxItems})">
    <comment>Wait for &quot;View all&quot; to be selected in header.</comment>
  </command>
  <module name="library.function.FWaitForText">
    <parameter name="textElement" value="css=.search-result-options:nth-child(4) .items-per-page select option[selected]"/>
    <parameter name="text" value="View All (${MaxItems})"/>
  </module>
  <command name="waitForText" disabled="true" target="css=.search-result-options:nth-child(4) .items-per-page select option[selected]" value="View All (${MaxItems})">
    <comment>Wait for &quot;View all&quot; to be selected in footer.</comment>
  </command>
  <module name="library.function.FWaitForText">
    <parameter name="textElement" value="css=.search-result-options:nth-child(2) .results-hits"/>
    <parameter name="text" value="*Showing 1 - ${MaxItems} of ${MaxItems} Results"/>
  </module>
  <command name="waitForText" disabled="true" target="css=.search-result-options:nth-child(2) .results-hits" value="*Showing 1 - ${MaxItems} of ${MaxItems} Results">
    <comment>Check for the correct number of products to be displayed in header.</comment>
  </command>
  <module name="library.function.FAssertText">
    <parameter name="textElement" value="css=.search-result-options:nth-child(4) .results-hits"/>
    <parameter name="textPattern" value="*Showing 1 - ${MaxItems} of ${MaxItems} Results"/>
  </module>
  <command name="assertText" disabled="true" target="css=.search-result-options:nth-child(4) .results-hits" value="*Showing 1 - ${MaxItems} of ${MaxItems} Results">
    <comment>Check for the correct number of products to be displayed in footer.</comment>
  </command>
</scriptmodule>
