<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Checks consequences for changing items per page:
- no changes in SortBy
- no changes in number if results
- no changes in order of products (first/last product)
- same products (first/last product)
- changes in number of items on page
- changes in pagination
Static Elements are:
- Sort Mode
- MaxItems</description>
  <parameter name="ItemsPerPage"/>
  <parameter name="SortMethod"/>
  <parameter name="ShownProductsFirstPage"/>
  <action name="SelectItemsPerPage"/>
  <command name="waitForElementPresent" target="name=Product-Paging-Options"/>
  <action name="SelectPagingOption"/>
  <command name="select" target="css=.search-result-options .items-per-page select" value="label=@{ItemsPerPage}">
    <comment>Select the desired amount of items per page.</comment>
  </command>
  <command name="waitForText" target="css=.pagination .results-hits" value="regexp:.*Showing [0-9]{1,} - @{ItemsPerPage} of [0-9]{1,} Results.*"/>
  <command name="storeText" target="css=.results-hits" value="PaginationText"/>
  <command name="storeText" target="css= .current-page" value="CurrentPage"/>
  <module name="modules.catalog.CompareSearchResultContainers">
    <parameter name="SortMethod" value="@{SortMethod}"/>
    <parameter name="ItemsPerPage" value="@{ItemsPerPage}"/>
  </module>
  <action name="SelectLastPage"/>
  <command name="click" target="css=.pagination li:last-child a">
    <comment>Switch to last page.</comment>
  </command>
  <command name="waitForElementPresent" target="css=.page-1">
    <comment>Wait for the page switch (link to fist page is visible).</comment>
  </command>
  <command name="storeText" target="css=.results-hits" value="PaginationText"/>
  <command name="storeText" target="css= .current-page" value="CurrentPage"/>
  <module name="modules.catalog.CompareSearchResultContainers">
    <parameter name="SortMethod" value="@{SortMethod}"/>
    <parameter name="ItemsPerPage" value="@{ItemsPerPage}"/>
  </module>
</scriptmodule>
