<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Tests the visibility of the mini cart when hovering over the mini cart link. Validates the product data displayed within the mini cart.

@Name = Name of the product
@Quantity = quantity of the chosen product
@PriceProduct = ProductÂ´s single price
@Position = Number of the product put into the cart</description>
  <parameter name="Name"/>
  <parameter name="Quantity"/>
  <parameter name="PriceProduct"/>
  <parameter name="Position"/>
  <command name="waitForElementPresent" target="css=.mini-cart-link">
    <comment>Shift Mouse focus to Mini Cart Icon to Display Cart Windows</comment>
  </command>
  <action name="OpenMiniCart"/>
  <command name="mouseOver" target="css=.mini-cart-link">
    <comment>Shift Mouse focus to Mini Cart Icon to Display Cart Windows</comment>
  </command>
  <command name="waitForVisible" target="css=.mini-cart-content"/>
  <command name="mouseOver" target="css=.mini-cart-content">
    <comment>Shift Mouse focus to an item inside Mini Cart</comment>
  </command>
  <command name="waitForElementPresent" disabled="true" target="css=.mini-cart-product:.mini-cart-product:nth-child(@{Position}) .mini-cart-name"/>
  <action name="CheckName"/>
  <command name="waitForElementPresent" target="css=.mini-cart-product:nth-child(@{Position}) .mini-cart-name"/>
  <command name="waitForText" target="css=.mini-cart-product:nth-child(@{Position}) .mini-cart-name" value="@{Name}"/>
  <command name="waitForText" disabled="true" target="css=.mini-cart-product:.mini-cart-product:nth-child(@{Position}) .mini-cart-name" value="@{Name}">
    <comment>Checks the correct product name in mini cart</comment>
  </command>
  <action name="CheckQuantity"/>
  <command name="assertText" target="css=.mini-cart-product:nth-child(@{Position})  .mini-cart-pricing .value" value="@{Quantity}"/>
  <command name="assertText" disabled="true" target="css=.mini-cart-product:.mini-cart-product:nth-child(@{Position}) .mini-cart-pricing .value" value="@{Quantity}">
    <comment>Checks the correct quantity in mini cart</comment>
  </command>
  <action name="CheckCost"/>
  <command name="assertText" target="css=.mini-cart-product:nth-child(@{Position}) .mini-cart-price" value="@{PriceProduct}"/>
  <command name="assertText" disabled="true" target="css=.mini-cart-product:.mini-cart-product:nth-child(@{Position}) .mini-cart-price" value="@{PriceProduct}"/>
  <action name="CheckTotal"/>
  <command name="assertText" disabled="true" target="css=.mini-cart-subtotals .value" value="regexpi:^-?\$\s*([0-9]|(([1-9][0-9]{0,2})(,[0-9]{3})*))\.[0-9]{2}$">
    <comment>Checks the correct format of the subtotal line</comment>
  </command>
  <action name="CloseMiniCart"/>
  <command name="mouseOut" target="css=.mini-cart-content">
    <comment>Move the cursor to the title logo to close the mini cart and free the mini cart area of the mouse to permit later opening of it again.</comment>
  </command>
  <command name="waitForNotVisible" target="css=.mini-cart-content"/>
</scriptmodule>
