<?xml version="1.0" encoding="UTF-8"?>
<scriptmodule xmlns="http://xlt.xceptance.com/xlt-script/2" version="4">
  <description>Tests the visibility of the mini cart when hovering over the mini cart link. Validates the product data displayed within the mini cart.

@Name = Name of the product
@Quantity = quantity of the chosen product
@PriceProduct = ProductÂ´s single price
@Position = Number of the product put into the cart</description>
  <parameter name="Name"/>
  <parameter name="Quantity"/>
  <parameter name="PriceProduct"/>
  <parameter name="Position"/>
  <command name="waitForElementPresent" target="css=.mini-cart-link">
    <comment>Shift Mouse focus to Mini Cart Icon to Display Cart Windows</comment>
  </command>
  <action name="OpenMiniCart"/>
  <command name="mouseOver" target="css=.mini-cart-link">
    <comment>Shift Mouse focus to Mini Cart Icon to Display Cart Windows</comment>
  </command>
  <command name="waitForVisible" target="css=.mini-cart-content"/>
  <command name="mouseOver" target="css=.mini-cart-content">
    <comment>Shift Mouse focus to an item inside Mini Cart</comment>
  </command>
  <action name="CheckName"/>
  <command name="waitForElementPresent" target="css=.mini-cart-product:nth-child(@{Position}) .mini-cart-name"/>
  <command name="mouseOver" target="css=.mini-cart-link"/>
  <command name="waitForText" target="css=.mini-cart-product:nth-child(@{Position}) .mini-cart-name" value="@{Name}"/>
  <action name="CheckQuantity"/>
  <command name="mouseOver" target="css=.mini-cart-link"/>
  <command name="assertText" target="css=.mini-cart-product:nth-child(@{Position})  .mini-cart-pricing .value" value="@{Quantity}"/>
  <action name="CheckCost"/>
  <command name="mouseOver" target="css=.mini-cart-link"/>
  <command name="assertText" target="css=.mini-cart-product:nth-child(@{Position}) .mini-cart-price" value="@{PriceProduct}"/>
  <action name="CheckTotal"/>
  <action name="CloseMiniCart"/>
  <command name="mouseOut" target="css=.mini-cart-content">
    <comment>Move the cursor to the title logo to close the mini cart and free the mini cart area of the mouse to permit later opening of it again.</comment>
  </command>
  <command name="waitForNotVisible" target="css=.mini-cart-content"/>
</scriptmodule>