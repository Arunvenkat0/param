<?xml version="1.0" encoding="UTF-8" ?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Adds products with the given quantity into the cart and validates the correct behaviour of the mini cart.

Pre-Condition: A product detail page is already opened.

@Parameters
Quantity : Number of items
ProductName: Name of the added product, used for validation
ProductPrice. Price of the added product, used for validation
Position:</description>
  <parameter name="Quantity"/>
  <parameter name="ProductName"/>
  <parameter name="ProductPrice"/>
  <parameter name="Position"/>
  <action name="EnterQuantity"/>
  <module name="library.function.FTypeAndVerifyInput">
    <parameter name="typeElement" value="id=Quantity"/>
    <parameter name="inputString" value="@{Quantity}"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="id=Quantity"/>
  <command name="click" disabled="true" target="id=Quantity"/>
  <command name="type" disabled="true" target="id=Quantity" value="@{Quantity}">
    <comment>Enter desired quantity.</comment>
  </command>
  <command name="waitForText" disabled="true" target="id=Quantity" value="@{Quantity}"/>
  <action name="AddToCart"/>
  <module name="library.function.FWaitForElement">
    <parameter name="element" value="xpath=id('add-to-cart')[not(@disabled='disabled')]"/>
  </module>
  <command name="waitForElementPresent" disabled="true" target="xpath=id('add-to-cart')[not(@disabled='disabled')]">
    <comment>Wait for enable add-to-cart button</comment>
  </command>
  <module name="library.function.FClick">
    <parameter name="clickElement" value="id=add-to-cart"/>
  </module>
  <command name="click" disabled="true" target="id=add-to-cart">
    <comment>Add product to cart.</comment>
  </command>
  <action name="CheckMiniCart">
    <comment>Checks the correct behaviour of the mini cart window and the content of the added product</comment>
  </action>
  <module name="modules.minicart.CheckAutomaticAppearanceOfMiniCart"/>
  <module name="modules.minicart.CheckContentOfMiniCart">
    <parameter name="Name" value="@{ProductName}"/>
    <parameter name="Quantity" value="@{Quantity}"/>
    <parameter name="PriceProduct" value="@{ProductPrice}"/>
    <parameter name="Position" value="@{Position}"/>
  </module>
</scriptmodule>
