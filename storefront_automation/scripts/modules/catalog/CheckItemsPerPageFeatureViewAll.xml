<?xml version="1.0" encoding="UTF-8"?>
<scriptmodule version="3" xmlns="http://xlt.xceptance.com/xlt-script/2">
  <description>Checks the correctness of the search result when "View all" is selected.</description>
  <parameter name="MaxItems"/>
  <parameter name="FirstItem"/>
  <parameter name="LastItem"/>
  <command name="waitForElementPresent" target="name=Product-Paging-Options"/>
  <command name="select" target="css=.search-result-options .items-per-page select" value="label=View All (@{MaxItems})">
    <comment>Select the "View all" option.</comment>
  </command>
  <command name="waitForText" target="css=.search-result-options:nth-child(2) .items-per-page select option[selected]" value="View All (@{MaxItems})">
    <comment>Wait for "View all" to be selected in header.</comment>
  </command>
  <command name="waitForText" target="css=.search-result-options:nth-child(4) .items-per-page select option[selected]" value="View All (@{MaxItems})">
    <comment>Wait for "View all" to be selected in footer.</comment>
  </command>
  <command name="waitForText" target="css=.search-result-options:nth-child(2) .results-hits" value="*Showing 1 - @{MaxItems} of @{MaxItems} Results">
    <comment>Check for the correct number of products to be displayed in header.</comment>
  </command>
  <command name="assertText" target="css=.search-result-options:nth-child(4) .results-hits" value="*Showing 1 - @{MaxItems} of @{MaxItems} Results">
    <comment>Check for the correct number of products to be displayed in footer.</comment>
  </command>
  <command name="assertText" target="css=.grid-tile:first-child .product-name" value="@{FirstItem}">
    <comment>Check for the correct first product.</comment>
  </command>
  <command name="assertText" target="css=.grid-tile:last-child .product-name" value="@{LastItem}">
    <comment>Check for the correct last product.</comment>
  </command>
</scriptmodule>